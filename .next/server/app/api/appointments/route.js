"use strict";(()=>{var e={};e.id=4282,e.ids=[4282],e.modules={2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5900:e=>{e.exports=require("pg")},4300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},2781:e=>{e.exports=require("stream")},3837:e=>{e.exports=require("util")},3e3:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>x,originalPathname:()=>q,patchFetch:()=>h,requestAsyncStorage:()=>m,routeModule:()=>d,serverHooks:()=>g,staticGenerationAsyncStorage:()=>f,staticGenerationBailout:()=>j});var n={};r.r(n),r.d(n,{GET:()=>c,POST:()=>l});var a=r(5419),s=r(9108),o=r(9678),i=r(8070),u=r(7107),p=r(9151);async function c(e){try{let t=(0,p.mk)(e);if(!t)return i.Z.json({error:"Authentication required"},{status:401});let{searchParams:r}=new URL(e.url),n=r.get("contact_id")||null,a=r.get("start_date")||null,s=r.get("end_date")||null,o=r.get("status")||null,c=parseInt(r.get("limit")||"50",10),l=parseInt(r.get("offset")||"0",10),d=await (0,u.Dw)(t,{contact_id:n,start_date:a,end_date:s,status:o,limit:c,offset:l});return i.Z.json({appointments:d})}catch(e){return console.error("Get appointments error:",e),i.Z.json({error:"Failed to retrieve appointments"},{status:500})}}async function l(e){try{let t=(0,p.mk)(e);if(!t)return i.Z.json({error:"Authentication required"},{status:401});let{title:r,description:n,contact_id:a,start_time:s,end_time:o,location:c,meeting_url:l,status:d,reminder_time:m}=await e.json();if(!r||!s||!o)return i.Z.json({error:"Title, start time, and end time are required"},{status:400});if(new Date(s)>=new Date(o))return i.Z.json({error:"End time must be after start time"},{status:400});let f=await (0,u.Pc)({title:r,description:n,contact_id:a,start_time:s,end_time:o,location:c,meeting_url:l,status:d,reminder_time:m},t);return i.Z.json({message:"Appointment created successfully",appointment:f},{status:201})}catch(e){if(console.error("Create appointment error:",e),"Contact not found"===e.message)return i.Z.json({error:"Contact not found"},{status:404});return i.Z.json({error:"Failed to create appointment"},{status:500})}}let d=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/appointments/route",pathname:"/api/appointments",filename:"route",bundlePath:"app/api/appointments/route"},resolvedPagePath:"/home/ubuntu/marketingsoftware/marketingsoftware-main/src/app/api/appointments/route.js",nextConfigOutput:"standalone",userland:n}),{requestAsyncStorage:m,staticGenerationAsyncStorage:f,serverHooks:g,headerHooks:x,staticGenerationBailout:j}=d,q="/api/appointments/route";function h(){return(0,o.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:f})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[1638,6206,7145,7439,5099],()=>r(3e3));module.exports=n})();