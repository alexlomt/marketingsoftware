"use strict";(()=>{var e={};e.id=1,e.ids=[1],e.modules={2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5900:e=>{e.exports=require("pg")},4300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},2781:e=>{e.exports=require("stream")},3837:e=>{e.exports=require("util")},1406:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>x,originalPathname:()=>j,patchFetch:()=>q,requestAsyncStorage:()=>p,routeModule:()=>l,serverHooks:()=>h,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>y});var o={};t.r(o),t.d(o,{DELETE:()=>f,GET:()=>d,PUT:()=>m});var n=t(5419),s=t(9108),a=t(9678),u=t(8070),i=t(2977),c=t(9151);async function d(e,{params:r}){try{let{id:t}=r,o=(0,c.mk)(e);if(!o)return u.Z.json({error:"Authentication required"},{status:401});let n=await (0,i.nC)(t,o);return u.Z.json({form:n})}catch(e){if(console.error("Get form error:",e),"Form not found"===e.message)return u.Z.json({error:"Form not found"},{status:404});return u.Z.json({error:"Failed to retrieve form"},{status:500})}}async function m(e,{params:r}){try{let{id:t}=r,o=(0,c.mk)(e);if(!o)return u.Z.json({error:"Authentication required"},{status:401});let{title:n,description:s,fields:a,settings:d,is_published:m}=await e.json();if(""===n)return u.Z.json({error:"Form title cannot be empty"},{status:400});if(a&&(!Array.isArray(a)||0===a.length))return u.Z.json({error:"Form must have at least one field"},{status:400});let f=await (0,i.xM)(t,o,{title:n,description:s,fields:a,settings:d,is_published:m});return u.Z.json({message:"Form updated successfully",form:f})}catch(e){if(console.error("Update form error:",e),"Form not found"===e.message)return u.Z.json({error:"Form not found"},{status:404});return u.Z.json({error:"Failed to update form"},{status:500})}}async function f(e,{params:r}){try{let{id:t}=r,o=(0,c.mk)(e);if(!o)return u.Z.json({error:"Authentication required"},{status:401});return await (0,i.dI)(t,o),u.Z.json({message:"Form deleted successfully"})}catch(e){if(console.error("Delete form error:",e),"Form not found"===e.message)return u.Z.json({error:"Form not found"},{status:404});return u.Z.json({error:"Failed to delete form"},{status:500})}}let l=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/forms/[id]/route",pathname:"/api/forms/[id]",filename:"route",bundlePath:"app/api/forms/[id]/route"},resolvedPagePath:"/home/ubuntu/marketingsoftware/marketingsoftware-main/src/app/api/forms/[id]/route.js",nextConfigOutput:"standalone",userland:o}),{requestAsyncStorage:p,staticGenerationAsyncStorage:g,serverHooks:h,headerHooks:x,staticGenerationBailout:y}=l,j="/api/forms/[id]/route";function q(){return(0,a.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:g})}},9151:(e,r,t)=>{function o(e){return e.headers.get("x-user-id")}function n(e){return e.headers.get("x-organization-id")}t.d(r,{mk:()=>n,n5:()=>o}),t(8070),t(7439),t(5813)},5813:(e,r,t)=>{t.d(r,{Oe:()=>u,RA:()=>i,WX:()=>c,c_:()=>a});var o=t(6521),n=t(6082);t(8046);let s=process.env.JWT_SECRET||"your-secret-key";async function a(e){return(0,o.hash)(e,10)}async function u(e,r){return(0,o.compare)(e,r)}function i(e,r="7d"){return(0,n.sign)(e,s,{expiresIn:r})}function c(e){try{return(0,n.verify)(e,s)}catch(e){return null}}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[1638,6206,7145,7439,2977],()=>t(1406));module.exports=o})();