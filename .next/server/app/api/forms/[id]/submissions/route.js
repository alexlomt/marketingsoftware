"use strict";(()=>{var e={};e.id=1489,e.ids=[1489],e.modules={2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5900:e=>{e.exports=require("pg")},4300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},2781:e=>{e.exports=require("stream")},3837:e=>{e.exports=require("util")},1642:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>g,originalPathname:()=>h,patchFetch:()=>b,requestAsyncStorage:()=>p,routeModule:()=>d,serverHooks:()=>l,staticGenerationAsyncStorage:()=>f,staticGenerationBailout:()=>x});var s={};t.r(s),t.d(s,{GET:()=>m});var n=t(5419),o=t(9108),i=t(9678),u=t(8070),a=t(2977),c=t(9151);async function m(e,{params:r}){try{let{id:t}=r,s=(0,c.mk)(e);if(!s)return u.Z.json({error:"Authentication required"},{status:401});let{pathname:n}=new URL(e.url),o=n.match(/\/submissions\/([^\/]+)$/);if(o){let e=o[1],r=await (0,a.getFormSubmissionById)(t,e,s);return u.Z.json({submission:r})}{let{searchParams:r}=new URL(e.url),n=parseInt(r.get("limit")||"50",10),o=parseInt(r.get("offset")||"0",10),i=r.get("sort_by")||"created_at",c=r.get("sort_dir")||"desc",m=await (0,a.hi)(t,s,{limit:n,offset:o,sort_by:i,sort_dir:c});return u.Z.json({submissions:m})}}catch(e){if(console.error("Get form submissions error:",e),"Form not found"===e.message)return u.Z.json({error:"Form not found"},{status:404});if("Submission not found"===e.message)return u.Z.json({error:"Submission not found"},{status:404});return u.Z.json({error:"Failed to retrieve form submissions"},{status:500})}}let d=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/forms/[id]/submissions/route",pathname:"/api/forms/[id]/submissions",filename:"route",bundlePath:"app/api/forms/[id]/submissions/route"},resolvedPagePath:"/home/ubuntu/marketingsoftware/marketingsoftware-main/src/app/api/forms/[id]/submissions/route.js",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:p,staticGenerationAsyncStorage:f,serverHooks:l,headerHooks:g,staticGenerationBailout:x}=d,h="/api/forms/[id]/submissions/route";function b(){return(0,i.patchFetch)({serverHooks:l,staticGenerationAsyncStorage:f})}},9151:(e,r,t)=>{function s(e){return e.headers.get("x-user-id")}function n(e){return e.headers.get("x-organization-id")}t.d(r,{mk:()=>n,n5:()=>s}),t(8070),t(7439),t(5813)},5813:(e,r,t)=>{t.d(r,{Oe:()=>u,RA:()=>a,WX:()=>c,c_:()=>i});var s=t(6521),n=t(6082);t(8046);let o=process.env.JWT_SECRET||"your-secret-key";async function i(e){return(0,s.hash)(e,10)}async function u(e,r){return(0,s.compare)(e,r)}function a(e,r="7d"){return(0,n.sign)(e,o,{expiresIn:r})}function c(e){try{return(0,n.verify)(e,o)}catch(e){return null}}}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[1638,6206,7145,7439,2977],()=>t(1642));module.exports=s})();